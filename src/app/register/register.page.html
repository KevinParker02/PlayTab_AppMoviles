<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="register-page">
  <div class="register-container">
    <h1>Regístrate</h1>
    <p class="subtitle">
      <strong>¿Un partido improvisado?</strong> ¡Encuentra compañeros en cualquier momento y lugar!
    </p>

    <form (submit)="SingUp()">
      <ion-item>
        <ion-label position="floating">Nombre y Apellido</ion-label>
        <ion-input [(ngModel)]="nombre" name="nombre" placeholder="Ingresa tu nombre" required></ion-input>
      </ion-item>


      <ion-item>
        <ion-label position="floating">RUT</ion-label>
        <ion-input [(ngModel)]="rut" name="rut" placeholder="Sin puntos con -" required></ion-input>
      </ion-item>

      <!-- Campo para la fecha de nacimiento -->
      <ion-item>
        <ion-label position="floating">Fecha de Nacimiento:</ion-label>
        <ion-input display-format="YYYY-MM-DD" placeholder="YYYY-MM-DD" [(ngModel)]="fechaNacimiento" required></ion-input> <!-- Cambié a ionBlur para abrir el calendario -->
        <ion-icon slot="end" name="calendar-outline"></ion-icon>
      </ion-item>   

      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input type="email" [(ngModel)]="mailuser" name="mailuser" placeholder="Ingresa tu correo" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Teléfono</ion-label>
        <ion-input [(ngModel)]="celular" name="celular" placeholder="+56 9 1234 5678" required></ion-input>
      </ion-item>

      <!-- Campo para seleccionar la región -->
      <ion-item>
        <ion-label position="floating">Region</ion-label>
        <ion-select [(ngModel)]="region" (ionChange)="onRegionChange()" placeholder = 'Seleccione su región' required>
          <ion-select-option *ngFor="let region of regionId" [value]="region.Id_Region">{{ region.Nombre_Region }}</ion-select-option>
        </ion-select>
      </ion-item>

      <!-- Campo para seleccionar la comuna -->
      <ion-item>
        <ion-label position="floating">Comuna</ion-label>
        <ion-select [(ngModel)]="comuna" placeholder = 'Seleccione su comuna' required>
          <ion-select-option *ngFor="let comuna of comunaId" [value]="comuna.Id_Comuna">{{ comuna.Nombre_Comuna }}</ion-select-option>
        </ion-select>                      
      </ion-item>

      <ion-item lines="none">
        <ion-label position="floating">Contraseña</ion-label>
        <ion-input
          [type]="showPassword ? 'text' : 'password'"
          [(ngModel)]="password"
          placeholder="Ingresa tu contraseña"
        ></ion-input>
        <ion-icon
          slot="end"
          [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
          (click)="togglePassword()"
        ></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Confirma tu contraseña</ion-label>
        <ion-input   [type]="showPassword ? 'text' : 'password'" [(ngModel)]="ConfirmPassword" name="ConfirmPassword" type="password" required placeholder="Ingresa tu contraseña una vez más"></ion-input>
      </ion-item>

      <ion-item lines="none">
        <ion-checkbox [(ngModel)]="AceptaCondiciones" name="condiciones" slot="start"></ion-checkbox>
        <ion-label>Términos y condiciones</ion-label>
      </ion-item>

      <ion-button expand="block" type="submit" class="submit-button">
        Crear cuenta
      </ion-button>
    </form>

    <p class="login-link">
      ¿Ya tienes una cuenta? <a [routerLink]="['/login']">Vuelve e inicia sesión</a>
    </p>
  </div>
</ion-content>
