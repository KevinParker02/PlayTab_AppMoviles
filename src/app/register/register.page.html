<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="register-page">
  <div class="register-container">
    <h1>Regístrate</h1>
    <p class="subtitle">
      <strong>¿Un partido improvisado?</strong> ¡Encuentra compañeros en cualquier momento y lugar!
    </p>

    <form (submit)="SingUp()">
      <ion-item>
        <ion-label position="floating">Nombre y Apellido</ion-label>
        <ion-input [(ngModel)]="nombre" name="nombre" required></ion-input>
      </ion-item>


      <ion-item>
        <ion-label position="floating">RUT</ion-label>
        <ion-input [(ngModel)]="rut" name="rut" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Fecha de nacimiento</ion-label>
        <ion-input type="date" [(ngModel)]="fechaNacimiento" name="fechaNacimiento" required></ion-input>
      </ion-item>

          <!-- Nombre de usuario -->
          <ion-item>
            <ion-input label="Nombre:" type="text" [(ngModel)]="nombre" required></ion-input>
            <ion-icon slot="end" name="person-circle-outline"></ion-icon>
          </ion-item>
          
          <!-- RUT del usuario -->
          <ion-item>
            <ion-input label="RUT:" placeholder="sin puntos y con -" type="text" [(ngModel)]="rut" (ionInput)="formatRut()" required></ion-input>
            <ion-icon slot="end" name="finger-print-outline"></ion-icon>
          </ion-item>
          <!-- Campo para la fecha de nacimiento -->
          <ion-item>
            <ion-label slot="start">Fecha de Nacimiento:</ion-label>
            <ion-input display-format="YYYY-MM-DD" placeholder="YYYY-MM-DD" [(ngModel)]="fechaNacimiento" required></ion-input> <!-- Cambié a ionBlur para abrir el calendario -->
            <ion-icon slot="end" name="calendar-outline"></ion-icon>
          </ion-item>   

      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input type="email" [(ngModel)]="mailuser" name="mailuser" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Teléfono</ion-label>
        <ion-input [(ngModel)]="celular" name="celular" placeholder="+56 9 1234 5678" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label>Región</ion-label>
        <ion-select [(ngModel)]="region" (ionChange)="onRegionChange()" name="region">
          <ion-select-option *ngFor="let reg of regionId" [value]="reg.id">{{ reg.nombre }}</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Comuna</ion-label>
        <ion-select [(ngModel)]="comuna" name="comuna">
          <ion-select-option *ngFor="let com of comunaId" [value]="com.id">{{ com.nombre }}</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Contraseña</ion-label>
        <ion-input [(ngModel)]="password" name="password" type="password" required></ion-input>
        <ion-icon slot="end" name="eye" (click)="togglePassword()"></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Confirma tu contraseña</ion-label>
        <ion-input [(ngModel)]="ConfirmPassword" name="ConfirmPassword" type="password" required></ion-input>
      </ion-item>

      <ion-item lines="none">
        <ion-checkbox [(ngModel)]="AceptaCondiciones" name="condiciones" slot="start"></ion-checkbox>
        <ion-label>Términos y condiciones</ion-label>
      </ion-item>

      <ion-button expand="block" type="submit" class="submit-button">
        Crear cuenta
      </ion-button>
    </form>

    <p class="login-link">
      ¿Ya tienes una cuenta? <a [routerLink]="['/login']">Vuelve e inicia sesión</a>
    </p>
  </div>
</ion-content>
